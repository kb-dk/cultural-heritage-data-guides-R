<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3 Mapping Carl Nielsens Works | _main.knit</title>
  <meta name="description" content="" />
  <meta name="generator" content="bookdown 0.44 and GitBook 2.6.7" />

  <meta property="og:title" content="3 Mapping Carl Nielsens Works | _main.knit" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3 Mapping Carl Nielsens Works | _main.knit" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="freedom-of-press-writings.html"/>

<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<img src="./img/DKB_logo_simplified_black_RGB.png" style="display: block; margin: 0 auto; width: 50%;" alt="Description"><p style="display: block; margin: 0 auto; width: 80%; font-size: 90%; text-align: center;"> <a href="https://www.kb.dk/services/kulturarv-til-forskning-og-studier/kulturarvssamlingerne-som-data">Navigate back to main webpage</a></p>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Cultural Heritage Data Guides - R</a>
<ul>
<li class="chapter" data-level="0.1" data-path="index.html"><a href="index.html#download-scripts-to-your-computer"><i class="fa fa-check"></i><b>0.1</b> Download scripts to your computer</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="set-up.html"><a href="set-up.html"><i class="fa fa-check"></i><b>1</b> Set Up</a>
<ul>
<li class="chapter" data-level="1.1" data-path="set-up.html"><a href="set-up.html#download-files"><i class="fa fa-check"></i><b>1.1</b> Download Files</a></li>
<li class="chapter" data-level="1.2" data-path="set-up.html"><a href="set-up.html#locate-downloaded-files"><i class="fa fa-check"></i><b>1.2</b> Locate Downloaded Files</a></li>
<li class="chapter" data-level="1.3" data-path="set-up.html"><a href="set-up.html#extract-zip-files"><i class="fa fa-check"></i><b>1.3</b> Extract Zip Files</a></li>
<li class="chapter" data-level="1.4" data-path="set-up.html"><a href="set-up.html#organize-your-data"><i class="fa fa-check"></i><b>1.4</b> Organize Your Data</a></li>
<li class="chapter" data-level="1.5" data-path="set-up.html"><a href="set-up.html#start-your-development-environment"><i class="fa fa-check"></i><b>1.5</b> Start Your Development Environment</a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="set-up.html"><a href="set-up.html#for-pythonjupyter-notebook-users"><i class="fa fa-check"></i><b>1.5.1</b> For Python/Jupyter Notebook Users</a></li>
<li class="chapter" data-level="1.5.2" data-path="set-up.html"><a href="set-up.html#for-r-users"><i class="fa fa-check"></i><b>1.5.2</b> For R Users</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="set-up.html"><a href="set-up.html#open-a-new-notebook-or-markdown-file"><i class="fa fa-check"></i><b>1.6</b> Open a New Notebook or Markdown File</a></li>
<li class="chapter" data-level="1.7" data-path="set-up.html"><a href="set-up.html#follow-the-guides"><i class="fa fa-check"></i><b>1.7</b> Follow the Guides</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="freedom-of-press-writings.html"><a href="freedom-of-press-writings.html"><i class="fa fa-check"></i><b>2</b> Freedom of Press Writings</a>
<ul>
<li class="chapter" data-level="2.1" data-path="freedom-of-press-writings.html"><a href="freedom-of-press-writings.html#loading-the-data"><i class="fa fa-check"></i><b>2.1</b> Loading the data</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="freedom-of-press-writings.html"><a href="freedom-of-press-writings.html#loading-libraries"><i class="fa fa-check"></i><b>2.1.1</b> Loading libraries</a></li>
<li class="chapter" data-level="2.1.2" data-path="freedom-of-press-writings.html"><a href="freedom-of-press-writings.html#load-data"><i class="fa fa-check"></i><b>2.1.2</b> Load Data</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="freedom-of-press-writings.html"><a href="freedom-of-press-writings.html#converting-to-tidy-text-format"><i class="fa fa-check"></i><b>2.2</b> Converting to Tidy Text Format</a></li>
<li class="chapter" data-level="2.3" data-path="freedom-of-press-writings.html"><a href="freedom-of-press-writings.html#analysis"><i class="fa fa-check"></i><b>2.3</b> Analysis</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="freedom-of-press-writings.html"><a href="freedom-of-press-writings.html#initial-analysis"><i class="fa fa-check"></i><b>2.3.1</b> Initial analysis</a></li>
<li class="chapter" data-level="2.3.2" data-path="freedom-of-press-writings.html"><a href="freedom-of-press-writings.html#handling-stopword"><i class="fa fa-check"></i><b>2.3.2</b> Handling Stopword</a></li>
<li class="chapter" data-level="2.3.3" data-path="freedom-of-press-writings.html"><a href="freedom-of-press-writings.html#keywords-in-context-kwic-analysis"><i class="fa fa-check"></i><b>2.3.3</b> Keywords in Context (KWIC) Analysis</a></li>
<li class="chapter" data-level="2.3.4" data-path="freedom-of-press-writings.html"><a href="freedom-of-press-writings.html#bigram-analysis"><i class="fa fa-check"></i><b>2.3.4</b> Bigram Analysis</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="mapping-carl-nielsens-works.html"><a href="mapping-carl-nielsens-works.html"><i class="fa fa-check"></i><b>3</b> Mapping Carl Nielsens Works</a>
<ul>
<li class="chapter" data-level="3.1" data-path="mapping-carl-nielsens-works.html"><a href="mapping-carl-nielsens-works.html#loading-libraries-1"><i class="fa fa-check"></i><b>3.1</b> Loading Libraries</a></li>
<li class="chapter" data-level="3.2" data-path="mapping-carl-nielsens-works.html"><a href="mapping-carl-nielsens-works.html#load-data-1"><i class="fa fa-check"></i><b>3.2</b> Load data</a></li>
<li class="chapter" data-level="3.3" data-path="mapping-carl-nielsens-works.html"><a href="mapping-carl-nielsens-works.html#which-authors-has-carl-nielsen-composed-most-music-to"><i class="fa fa-check"></i><b>3.3</b> Which authors has Carl Nielsen composed most music to:</a></li>
<li class="chapter" data-level="3.4" data-path="mapping-carl-nielsens-works.html"><a href="mapping-carl-nielsens-works.html#which-cityplace-has-seen-most-performances-of-carl-nielsen-works"><i class="fa fa-check"></i><b>3.4</b> Which city/place has seen most performances of Carl Nielsen Works?</a></li>
<li class="chapter" data-level="3.5" data-path="mapping-carl-nielsens-works.html"><a href="mapping-carl-nielsens-works.html#which-titles-in-which-countries"><i class="fa fa-check"></i><b>3.5</b> Which titles in which countries?</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="mapping-carl-nielsens-works" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">3</span> Mapping Carl Nielsens Works<a href="mapping-carl-nielsens-works.html#mapping-carl-nielsens-works" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>This notebook is about analyzing the musical works of Carl Nielsen, by using digital methods.R is going to be used for examining: - Which author has Carl Nielsen composed most works for
- Where have Carl Nielsens Works been performed?
- Which titles were performed in which countries</p>
<p>The overall area of interest is the Danish composer Carl Nielsen’s works. These works have been collected and organised into the platform <a href="https://www.kb.dk/dcm/cnw/about.xq">Catalogue of Carl Nielsen’s Works</a> by the former Danish Centre for Music Editing at the Royal Danish Library.
The material used in this workshop is data extracted from the raw data used in the catalogue mentioned above. The data has then been organised in the R-data format in order to make this workshop more about analysing the data rather than parsing it.</p>
<p>The data used on the platform <a href="https://www.kb.dk/dcm/cnw/about.xq">Catalogue of Carl Nielsen’s Works</a> is availabe in raw xml format here: <a href="https://loar.kb.dk/items/7095cffa-6c9c-42c5-b1a7-44deae920871">Download-site raw xml data for Carl Nielsen’s Works</a>.
The catalogue uses the MEI xml format, designed to encode notated music as well as comprehensive musical metadata. The Carl Nielsen catalogue uses only the metadata part; the notated music (scores) are not included in the encoding. The MEI standard is developed and maintained by the <a href="https://music-encoding.org/">Music Encoding Initiative</a>.</p>
<div id="loading-libraries-1" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> Loading Libraries<a href="mapping-carl-nielsens-works.html#loading-libraries-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The dataset is processed in the software programme R, offering various methods for statistical analysis and graphic representation of the results. In R, one works with packages each adding numerous functionalities to the core functions of R. In this example, the relevant packages are:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="mapping-carl-nielsens-works.html#cb21-1" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb21-2"><a href="mapping-carl-nielsens-works.html#cb21-2" tabindex="-1"></a><span class="fu">library</span>(tidytext)</span></code></pre></div>
</div>
<div id="load-data-1" class="section level2 hasAnchor" number="3.2">
<h2><span class="header-section-number">3.2</span> Load data<a href="mapping-carl-nielsens-works.html#load-data-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The code below reads data from a RDS file named “cnw_dataframe.rds” and stores it in a variable called cnw.A RDS-file is a single-object R data file used to save and load one R object (like a model or dataframe).</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="mapping-carl-nielsens-works.html#cb22-1" tabindex="-1"></a>cnw <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="fu">url</span>(<span class="st">&quot;https://raw.githubusercontent.com/maxodsbjerg/MappingCarlNielsensWorks/refs/heads/main/data-output/cnw_dataframe.rds&quot;</span>))</span></code></pre></div>
</div>
<div id="which-authors-has-carl-nielsen-composed-most-music-to" class="section level2 hasAnchor" number="3.3">
<h2><span class="header-section-number">3.3</span> Which authors has Carl Nielsen composed most music to:<a href="mapping-carl-nielsens-works.html#which-authors-has-carl-nielsen-composed-most-music-to" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>This code takes the data frame cnw, keeps only rows where author is not an empty string, and then counts how many times each author appears, returning the counts sorted from most to least frequent.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="mapping-carl-nielsens-works.html#cb23-1" tabindex="-1"></a>cnw <span class="sc">%&gt;%</span> </span>
<span id="cb23-2"><a href="mapping-carl-nielsens-works.html#cb23-2" tabindex="-1"></a>  <span class="fu">filter</span>(author <span class="sc">!=</span> <span class="st">&quot;&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb23-3"><a href="mapping-carl-nielsens-works.html#cb23-3" tabindex="-1"></a>  <span class="fu">count</span>(author, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## # A tibble: 103 × 2
##    author                    n
##    &lt;chr&gt;                 &lt;int&gt;
##  1 N.F.S. Grundtvig         44
##  2 Adam Oehlenschläger      17
##  3 Helge Rode               16
##  4 J.P. Jacobsen            15
##  5 Jeppe Aakjær             15
##  6 Ludvig Holstein          13
##  7 L.C. Nielsen             11
##  8 Hans Adolph Brorson      10
##  9 Holger Drachmann         10
## 10 Bjørnstjerne Bjørnson     7
## # ℹ 93 more rows</code></pre>
</div>
<div id="which-cityplace-has-seen-most-performances-of-carl-nielsen-works" class="section level2 hasAnchor" number="3.4">
<h2><span class="header-section-number">3.4</span> Which city/place has seen most performances of Carl Nielsen Works?<a href="mapping-carl-nielsens-works.html#which-cityplace-has-seen-most-performances-of-carl-nielsen-works" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>For now we’ll just look at a single work:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="mapping-carl-nielsens-works.html#cb25-1" tabindex="-1"></a>cnw <span class="sc">%&gt;%</span> </span>
<span id="cb25-2"><a href="mapping-carl-nielsens-works.html#cb25-2" tabindex="-1"></a>  <span class="fu">filter</span>(title_da <span class="sc">==</span> <span class="st">&quot;Saul og David&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 1 × 17
##   file       title_da title_en title_sub_da title_sub_en composer author creation classification_1 classification_2 classification_3
##   &lt;chr&gt;      &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt;        &lt;chr&gt;        &lt;chr&gt;    &lt;chr&gt;  &lt;chr&gt;    &lt;chr&gt;            &lt;chr&gt;            &lt;chr&gt;           
## 1 ../data-c… Saul og… Saul an… Opera i fir… Opera in Fo… Carl Ni… Einar… 1899–19… Stage music      Opera            &lt;NA&gt;            
## # ℹ 6 more variables: classification_4 &lt;chr&gt;, classification_5 &lt;chr&gt;, classification_6 &lt;chr&gt;, history &lt;chr&gt;, performances &lt;list&gt;,
## #   music &lt;list&gt;</code></pre>
<p>We see that the row under performances holds a “tibble”, which is a dataframe. This dataframe contains all the performances of Saul and David, but we cant count how many because it is in a dataframe within a row. But we can unpack this dataframe while retaining all the other information:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="mapping-carl-nielsens-works.html#cb27-1" tabindex="-1"></a>cnw <span class="sc">%&gt;%</span> </span>
<span id="cb27-2"><a href="mapping-carl-nielsens-works.html#cb27-2" tabindex="-1"></a>  <span class="fu">filter</span>(title_da <span class="sc">==</span> <span class="st">&quot;Saul og David&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb27-3"><a href="mapping-carl-nielsens-works.html#cb27-3" tabindex="-1"></a>  <span class="fu">unnest</span>(performances)</span></code></pre></div>
<pre><code>## # A tibble: 112 × 23
##    file      title_da title_en title_sub_da title_sub_en composer author creation classification_1 classification_2 classification_3
##    &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt;        &lt;chr&gt;        &lt;chr&gt;    &lt;chr&gt;  &lt;chr&gt;    &lt;chr&gt;            &lt;chr&gt;            &lt;chr&gt;           
##  1 ../data-… Saul og… Saul an… Opera i fir… Opera in Fo… Carl Ni… Einar… 1899–19… Stage music      Opera            &lt;NA&gt;            
##  2 ../data-… Saul og… Saul an… Opera i fir… Opera in Fo… Carl Ni… Einar… 1899–19… Stage music      Opera            &lt;NA&gt;            
##  3 ../data-… Saul og… Saul an… Opera i fir… Opera in Fo… Carl Ni… Einar… 1899–19… Stage music      Opera            &lt;NA&gt;            
##  4 ../data-… Saul og… Saul an… Opera i fir… Opera in Fo… Carl Ni… Einar… 1899–19… Stage music      Opera            &lt;NA&gt;            
##  5 ../data-… Saul og… Saul an… Opera i fir… Opera in Fo… Carl Ni… Einar… 1899–19… Stage music      Opera            &lt;NA&gt;            
##  6 ../data-… Saul og… Saul an… Opera i fir… Opera in Fo… Carl Ni… Einar… 1899–19… Stage music      Opera            &lt;NA&gt;            
##  7 ../data-… Saul og… Saul an… Opera i fir… Opera in Fo… Carl Ni… Einar… 1899–19… Stage music      Opera            &lt;NA&gt;            
##  8 ../data-… Saul og… Saul an… Opera i fir… Opera in Fo… Carl Ni… Einar… 1899–19… Stage music      Opera            &lt;NA&gt;            
##  9 ../data-… Saul og… Saul an… Opera i fir… Opera in Fo… Carl Ni… Einar… 1899–19… Stage music      Opera            &lt;NA&gt;            
## 10 ../data-… Saul og… Saul an… Opera i fir… Opera in Fo… Carl Ni… Einar… 1899–19… Stage music      Opera            &lt;NA&gt;            
## # ℹ 102 more rows
## # ℹ 12 more variables: classification_4 &lt;chr&gt;, classification_5 &lt;chr&gt;, classification_6 &lt;chr&gt;, history &lt;chr&gt;, isodate &lt;chr&gt;,
## #   startdate &lt;chr&gt;, enddate &lt;chr&gt;, place &lt;chr&gt;, venue &lt;chr&gt;, ensemble &lt;chr&gt;, conductor &lt;chr&gt;, music &lt;list&gt;</code></pre>
<p>There is 112 performances of Saul and David. But this is just for one work. We do the same for the entire dataset and save it to a new data frame, since we are changing dramatically on the form of of the data. We’re making the shift from having one work pr. row to have one performances of a work pr. row:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="mapping-carl-nielsens-works.html#cb29-1" tabindex="-1"></a>cnw_performances <span class="ot">&lt;-</span> cnw <span class="sc">%&gt;%</span></span>
<span id="cb29-2"><a href="mapping-carl-nielsens-works.html#cb29-2" tabindex="-1"></a>  <span class="fu">unnest</span>(performances) </span></code></pre></div>
<p>Since all the other data have been retained for each performances we can now count to see which work has been performened the most:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="mapping-carl-nielsens-works.html#cb30-1" tabindex="-1"></a>cnw_performances <span class="sc">%&gt;%</span> </span>
<span id="cb30-2"><a href="mapping-carl-nielsens-works.html#cb30-2" tabindex="-1"></a>  <span class="fu">count</span>(title_da, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## # A tibble: 252 × 2
##    title_da                                                                                        n
##    &lt;chr&gt;                                                                                       &lt;int&gt;
##  1 &quot;Maskarade&quot;                                                                                   602
##  2 &quot;Musik til Adam Oehlenschlägers skuespil \&quot;Aladdin eller Den forunderlige Lampe\&quot;, opus 34&quot;   211
##  3 &quot;Jeg bærer med Smil min Byrde&quot;                                                                204
##  4 &quot;Jens Vejmand, opus 21.3&quot;                                                                     155
##  5 &quot;Æbleblomst, opus 10.1&quot;                                                                       121
##  6 &quot;Saul og David&quot;                                                                               112
##  7 &quot;Sang bag Ploven, opus 10.4&quot;                                                                   96
##  8 &quot;Silkesko over gylden Læst!, opus 6.3&quot;                                                         96
##  9 &quot;Musik til Helge Rodes skuespil \&quot;Moderen\&quot;, opus 41&quot;                                          92
## 10 &quot;Suite for strygeorkester, opus 1&quot;                                                             87
## # ℹ 242 more rows</code></pre>
<p>Following the same logic we can also examine which city has seen the most performances:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="mapping-carl-nielsens-works.html#cb32-1" tabindex="-1"></a>cnw_performances <span class="sc">%&gt;%</span> </span>
<span id="cb32-2"><a href="mapping-carl-nielsens-works.html#cb32-2" tabindex="-1"></a>  <span class="fu">count</span>(place, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## # A tibble: 241 × 2
##    place            n
##    &lt;chr&gt;        &lt;int&gt;
##  1 &quot;Copenhagen&quot;  2950
##  2 &quot;Gothenburg&quot;   112
##  3 &quot;Stockholm&quot;    111
##  4 &quot;Odense&quot;        92
##  5 &quot;Aarhus&quot;        88
##  6 &quot;&quot;              55
##  7 &quot;Berlin&quot;        43
##  8 &quot;Aalborg&quot;       42
##  9 &quot;Oslo&quot;          42
## 10 &quot;Ryslinge&quot;      41
## # ℹ 231 more rows</code></pre>
<p>Copenhagen is out of proportions - lets filter it out for a nice visualisation:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="mapping-carl-nielsens-works.html#cb34-1" tabindex="-1"></a>cnw_performances <span class="sc">%&gt;%</span> </span>
<span id="cb34-2"><a href="mapping-carl-nielsens-works.html#cb34-2" tabindex="-1"></a>  <span class="fu">filter</span>(place <span class="sc">!=</span> <span class="st">&quot;&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb34-3"><a href="mapping-carl-nielsens-works.html#cb34-3" tabindex="-1"></a>  <span class="fu">filter</span>(place <span class="sc">!=</span> <span class="st">&quot;Copenhagen&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb34-4"><a href="mapping-carl-nielsens-works.html#cb34-4" tabindex="-1"></a>  <span class="fu">count</span>(place, <span class="at">sort =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb34-5"><a href="mapping-carl-nielsens-works.html#cb34-5" tabindex="-1"></a>   <span class="fu">slice_max</span>(n, <span class="at">n =</span> <span class="dv">15</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb34-6"><a href="mapping-carl-nielsens-works.html#cb34-6" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">place =</span> <span class="fu">reorder</span>(place, n)) <span class="sc">%&gt;%</span></span>
<span id="cb34-7"><a href="mapping-carl-nielsens-works.html#cb34-7" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> place, <span class="at">y =</span> n)) <span class="sc">+</span></span>
<span id="cb34-8"><a href="mapping-carl-nielsens-works.html#cb34-8" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">fill =</span> <span class="st">&quot;lightblue&quot;</span>) <span class="sc">+</span></span>
<span id="cb34-9"><a href="mapping-carl-nielsens-works.html#cb34-9" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb34-10"><a href="mapping-carl-nielsens-works.html#cb34-10" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb34-11"><a href="mapping-carl-nielsens-works.html#cb34-11" tabindex="-1"></a>    <span class="at">title    =</span> <span class="st">&quot;Performances of Carl Nielsen works outside of Copenhagen&quot;</span>,</span>
<span id="cb34-12"><a href="mapping-carl-nielsens-works.html#cb34-12" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">&quot;- dispersed on cities&quot;</span>,</span>
<span id="cb34-13"><a href="mapping-carl-nielsens-works.html#cb34-13" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">&quot;Data from Catalogue of Carl Nielsen&#39;s Works (CNW)&quot;</span>,</span>
<span id="cb34-14"><a href="mapping-carl-nielsens-works.html#cb34-14" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">&quot;City&quot;</span>,</span>
<span id="cb34-15"><a href="mapping-carl-nielsens-works.html#cb34-15" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">&quot;Count of performances&quot;</span></span>
<span id="cb34-16"><a href="mapping-carl-nielsens-works.html#cb34-16" tabindex="-1"></a>  ) </span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-19-1.png" width="672" />
This code filters and counts the top 15 non-Copenhagen cities using tidyverse pipes, and the shift to visualization is clearly marked when the syntax switches from %&gt;% to +, which signals moving from data-wrangling logic into ggplot layer-building logic.</p>
</div>
<div id="which-titles-in-which-countries" class="section level2 hasAnchor" number="3.5">
<h2><span class="header-section-number">3.5</span> Which titles in which countries?<a href="mapping-carl-nielsens-works.html#which-titles-in-which-countries" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Load geographical data about cities with 3 or more performances of Carl Nielsen Works:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="mapping-carl-nielsens-works.html#cb35-1" tabindex="-1"></a>cnw_cities <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="fu">url</span>(<span class="st">&quot;https://raw.githubusercontent.com/maxodsbjerg/MappingCarlNielsensWorks/refs/heads/main/data-output/20241020_cnw_performances_geographical_information.rds&quot;</span>))</span></code></pre></div>
<p>Add the geographical data to the performances data frame:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="mapping-carl-nielsens-works.html#cb36-1" tabindex="-1"></a>cnw_performances <span class="ot">&lt;-</span> cnw_performances <span class="sc">%&gt;%</span> </span>
<span id="cb36-2"><a href="mapping-carl-nielsens-works.html#cb36-2" tabindex="-1"></a>  <span class="fu">left_join</span>(cnw_cities, <span class="at">by =</span> <span class="st">&quot;place&quot;</span>)</span></code></pre></div>
<p>Dispersions of performances on country:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="mapping-carl-nielsens-works.html#cb37-1" tabindex="-1"></a>cnw_performances <span class="sc">%&gt;%</span> </span>
<span id="cb37-2"><a href="mapping-carl-nielsens-works.html#cb37-2" tabindex="-1"></a>  <span class="fu">drop_na</span>(country) <span class="sc">%&gt;%</span> </span>
<span id="cb37-3"><a href="mapping-carl-nielsens-works.html#cb37-3" tabindex="-1"></a>  <span class="fu">count</span>(country, <span class="at">sort  =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## # A tibble: 20 × 2
##    country             n
##    &lt;chr&gt;           &lt;int&gt;
##  1 Danmark          3842
##  2 Sverige           242
##  3 Deutschland       120
##  4 Norge              49
##  5 Nederland          15
##  6 France             14
##  7 Suomi / Finland    13
##  8 Polska              8
##  9 United Kingdom      8
## 10 Česko               8
## 11 Österreich          7
## 12 Magyarország        6
## 13 United States       6
## 14 Hrvatska            2
## 15 Italia              2
## 16 România             2
## 17 日本                2
## 18 España              1
## 19 Kenya               1
## 20 Latvija             1</code></pre>
<p>Which titles has been performed the most in Denmark:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="mapping-carl-nielsens-works.html#cb39-1" tabindex="-1"></a>cnw_performances <span class="sc">%&gt;%</span> </span>
<span id="cb39-2"><a href="mapping-carl-nielsens-works.html#cb39-2" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">&quot;Danmark&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb39-3"><a href="mapping-carl-nielsens-works.html#cb39-3" tabindex="-1"></a>  <span class="fu">count</span>(title_da, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## # A tibble: 251 × 2
##    title_da                                                                                        n
##    &lt;chr&gt;                                                                                       &lt;int&gt;
##  1 &quot;Maskarade&quot;                                                                                   512
##  2 &quot;Jeg bærer med Smil min Byrde&quot;                                                                195
##  3 &quot;Musik til Adam Oehlenschlägers skuespil \&quot;Aladdin eller Den forunderlige Lampe\&quot;, opus 34&quot;   157
##  4 &quot;Jens Vejmand, opus 21.3&quot;                                                                     149
##  5 &quot;Æbleblomst, opus 10.1&quot;                                                                       117
##  6 &quot;Sang bag Ploven, opus 10.4&quot;                                                                   89
##  7 &quot;Musik til Helge Rodes skuespil \&quot;Moderen\&quot;, opus 41&quot;                                          87
##  8 &quot;Silkesko over gylden Læst!, opus 6.3&quot;                                                         87
##  9 &quot;Sænk kun dit Hoved, du Blomst, opus 21.4&quot;                                                     76
## 10 &quot;Saul og David&quot;                                                                                75
## # ℹ 241 more rows</code></pre>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="freedom-of-press-writings.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
  "sharing": {
    "github": false,
    "facebook": true,
    "twitter": true,
    "linkedin": false,
    "weibo": false,
    "instapaper": false,
    "vk": false,
    "whatsapp": false,
    "all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
  },
  "fontsettings": {
    "theme": "white",
    "family": "sans",
    "size": 2
  },
  "edit": {
    "link": null,
    "text": null
  },
  "history": {
    "link": null,
    "text": null
  },
  "view": {
    "link": null,
    "text": null
  },
  "download": ["_main.pdf", "_main.epub"],
  "search": {
    "engine": "fuse",
    "options": null
  },
  "toc": {
    "collapse": "section"
  },
  "language": {
    "ui": {
      "chapter_name": "Chapter ",
      "toc_title": "Table of Contents",
      "prev": "Previous",
      "next": "Next",
      "home": "Home"
    }
  }
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
